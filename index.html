<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>SantShop | Tech & Accesorios</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  
  <link rel="icon" type="image/png" href="SantShop.png.jpeg">
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <style>
    :root {
      --dark-bg: #050b14;
      --card-glass: rgba(30, 41, 59, 0.7);
      --blue: #3b82f6;
      --text: #f1f5f9;
      --gray: #94a3b8;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', system-ui, sans-serif; -webkit-tap-highlight-color: transparent; }
    
    body { 
      background-color: var(--dark-bg);
      background-image: radial-gradient(at 0% 0%, rgba(59, 130, 246, 0.15) 0px, transparent 50%);
      background-attachment: fixed;
      color: var(--text); 
      padding-bottom: 120px;
    }

    /* HEADER */
    header {
      position: sticky; top: 0; z-index: 100;
      background: rgba(5, 11, 20, 0.9); backdrop-filter: blur(12px);
      padding: 10px 20px;
      display: flex; justify-content: space-between; align-items: center;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .brand { display: flex; align-items: center; gap: 10px; }
    .brand img { width: 35px; height: 35px; border-radius: 50%; border: 1px solid var(--blue); }

    .cart-trigger {
      background: #1e293b; padding: 5px 15px; border-radius: 20px; 
      display: flex; align-items: center; gap: 8px; cursor: pointer;
    }
    .cart-trigger img { width: 18px; height: 18px; border-radius: 50%; }

    /* HERO */
    .hero {
      padding: 40px 20px; text-align: center;
    }
    .hero img { 
      width: 140px; height: 140px; object-fit: cover; margin-bottom: 15px; border-radius: 50%; 
      box-shadow: 0 0 35px rgba(59, 130, 246, 0.4); border: 2px solid var(--blue);
    }
    .hero h1 { font-size: 2.5rem; color: white; margin-bottom: 5px; }

    /* CONTROLES */
    .controls-container { padding: 0 20px; max-width: 1200px; margin: auto; }
    .search-box input {
      width: 100%; background: #1e293b; border: 1px solid #334155;
      padding: 12px; border-radius: 12px; color: white; font-size: 1rem; margin-bottom: 15px;
    }
    .categories { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; scrollbar-width: none; }
    .cat-btn {
      padding: 8px 18px; border-radius: 50px; border: 1px solid #334155;
      background: #0f172a; color: var(--gray); cursor: pointer; white-space: nowrap;
    }
    .cat-btn.active { background: var(--blue); color: white; border-color: var(--blue); }

    /* PRODUCTOS */
    .products {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px; padding: 20px; max-width: 1200px; margin: auto;
    }
    .card {
      background: var(--card-glass); backdrop-filter: blur(10px);
      border-radius: 20px; padding: 15px; border: 1px solid rgba(255,255,255,0.05);
      display: flex; flex-direction: column; transition: 0.3s;
    }
    .card:active { transform: scale(0.98); }
    .card img { width: 100%; height: 150px; object-fit: contain; margin-bottom: 10px; background: rgba(255,255,255,0.02); border-radius: 10px; }
    .price { font-size: 1.3rem; font-weight: 800; color: white; margin: 5px 0; }
    .add-btn {
      width: 100%; padding: 10px; border-radius: 10px; border: none;
      background: var(--blue); color: white; font-weight: 700; cursor: pointer;
    }

    /* CHECKOUT */
    .checkout-panel {
      background: #0f172a; padding: 25px; border-radius: 25px; 
      margin: 20px; border: 1px solid #334155;
    }

    /* TICKET ESTILO T√âRMICO */
    #ticket-container {
      position: fixed; top: 0; left: -2000px;
      width: 350px; background: #fff; color: #000; padding: 20px;
      font-family: 'Courier New', Courier, monospace; text-transform: uppercase;
    }
    .t-header { text-align: center; border-bottom: 2px dashed #000; padding-bottom: 10px; margin-bottom: 10px; }
    .t-row { display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 5px; }
    .t-total { font-size: 18px; font-weight: bold; margin-top: 10px; border-top: 2px dashed #000; padding-top: 5px; text-align: right; }

    /* MODAL */
    .modal {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.9); z-index: 2000; display: none;
      justify-content: center; align-items: center; padding: 20px;
    }
    .wa-float {
      position: fixed; bottom: 20px; right: 20px;
      background: #25D366; color: white; padding: 12px 20px;
      border-radius: 50px; text-decoration: none; font-weight: bold; box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    }
    #toast {
      position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
      background: #10b981; color: white; padding: 10px 20px; border-radius: 20px;
      display: none; z-index: 3000; font-weight: bold;
    }
  </style>
</head>
<body>

<div id="toast">‚úÖ Agregado al carrito</div>

<div id="ticket-container">
    <div class="t-header">
        <h1 style="font-size: 24px; margin:0;">SANTSHOP</h1>
        <p>Tech & Accesorios</p>
        <p id="t-fecha">Fecha: --/--/----</p>
    </div>
    <div style="border-bottom: 1px solid #000; margin-bottom: 5px;">DESCRIPCI√ìN</div>
    <div id="t-items"></div>
    <div class="t-row" style="margin-top:10px;">
        <span>ENV√çO:</span>
        <span id="t-envio">$0.00</span>
    </div>
    <div class="t-total">
        TOTAL: <span id="t-total">$0.00</span>
    </div>
    <div style="text-align:center; font-size:10px; margin-top:20px;">
        <p>*** GRACIAS POR TU COMPRA ***</p>
        <p>HUEHUET√ÅN, CHIAPAS</p>
    </div>
</div>

<header>
  <div class="brand">
    <img src="SantShop.png.jpeg" alt="Logo">
    <strong>SantShop</strong>
  </div>
  <div class="cart-trigger" onclick="document.querySelector('.checkout-panel').scrollIntoView()">
    <img src="https://cdn-icons-png.flaticon.com/512/3394/3394009.png" alt="Logo Carrito">
    <span id="cartCount">0</span>
  </div>
</header>

<div class="hero">
  <img src="SantShop.png.jpeg" alt="SantShop Logo Principal">
  <h1>SantShop</h1>
  <p>Tecnolog√≠a Premium</p>
</div>

<div class="controls-container">
  <div class="search-box">
    <input type="text" id="searchInput" placeholder="üîç Buscar producto..." onkeyup="renderProducts()">
  </div>
  <div class="categories">
    <button class="cat-btn active" onclick="filterCat('all', this)">Todo</button>
    <button class="cat-btn" onclick="filterCat('audio', this)">Audio</button>
    <button class="cat-btn" onclick="filterCat('carga', this)">Carga</button>
    <button class="cat-btn" onclick="filterCat('relojes', this)">Relojes</button>
    <button class="cat-btn" onclick="filterCat('accesorios', this)">Accesorios</button>
  </div>
</div>

<div class="products" id="productList"></div>

<div class="checkout-panel">
  <h3>üßæ Tu Pedido</h3>
  <div id="cartList" style="margin:15px 0;"></div>
  
  <label style="color:var(--gray); font-size:0.9rem;">üìç Entrega:</label>
  <select id="envioSelect" onchange="renderCart()" style="width:100%; padding:10px; margin-top:5px; background:#1e293b; color:white; border:1px solid #334155; border-radius:10px;">
    <option value="0">--- Seleccionar ---</option>
    <option value="0">Parque Huehuet√°n (Gratis)</option>
    <option value="0">La Central / Kristal (Gratis)</option>
    <option value="15">A Domicilio (Cercano) +$15</option>
    <option value="25">Huehuet√°n Pueblo +$25</option>
  </select>

  <div style="display:flex; justify-content:space-between; margin-top:20px; font-size:1.5rem; font-weight:bold;">
    <span>Total:</span>
    <span id="displayTotal" style="color:var(--blue)">$0.00</span>
  </div>

  <button id="btnGenerar" onclick="procesarPedido()" style="width:100%; padding:15px; background:var(--blue); color:white; border:none; border-radius:12px; margin-top:20px; font-weight:bold; font-size:1.1rem; cursor:pointer;">
    CONFIRMAR Y GENERAR TICKET
  </button>
</div>

<div id="productModal" class="modal">
  <div style="background:#1e293b; padding:20px; border-radius:20px; width:90%; max-width:400px; position:relative;">
    <span onclick="closeModal()" style="position:absolute; right:15px; top:10px; font-size:24px; cursor:pointer;">&times;</span>
    <div id="modalBody"></div>
  </div>
</div>

<a href="https://wa.me/529641034714" class="wa-float" target="_blank">WhatsApp</a>

<script>
const phone = '529641034714';
const money = new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' });

const products = [
  { id: 1, name: 'Aud√≠fonos TWS Pro 2', category: 'audio', price: 299, img: 'https://http2.mlstatic.com/D_NQ_NP_2X_697864-MLA100038119191_122025-F.webp', desc: 'Sonido Hi-Fi y cancelaci√≥n de ruido.' },
  { id: 2, name: 'PowerBank 10k mAh', category: 'carga', price: 599, img: 'https://http2.mlstatic.com/D_NQ_NP_2X_995948-MLA99547949208_122025-F.webp', desc: 'Carga r√°pida 22.5W.' },
  { id: 3, name: 'Anillo Titanio Black', category: 'accesorios', price: 40, img: 'https://http2.mlstatic.com/D_NQ_NP_2X_778377-MLA98079491084_112025-F.webp', desc: 'Acero inoxidable negro mate.' },
  { id: 4, name: 'Cargador 45W Turbo', category: 'carga', price: 280, img: 'https://http2.mlstatic.com/D_NQ_NP_2X_616746-MLA100083526249_122025-F.webp', desc: 'Incluye cable tipo C reforzado.' },
  { id: 5, name: 'Smartwatch Ultra', category: 'relojes', price: 450, img: 'https://http2.mlstatic.com/D_NQ_NP_2X_942600-MLA99945379683_112025-F.webp', desc: 'Pantalla AMOLED y llamadas.' },
  { id: 6, name: 'Sport Hooks IPX7', category: 'audio', price: 450, img: 'https://http2.mlstatic.com/D_NQ_NP_2X_681843-MLA99455767776_112025-F.webp', desc: 'Ganchos deportivos ajustables.' },
  { id: 7, name: 'Figura Jujutsu Kaisen', category: 'accesorios', price: 500, img: 'https://http2.mlstatic.com/D_NQ_NP_2X_630678-MLA100664763410_122025-F.webp', desc: 'Coleccionable premium.' }
];

let cart = JSON.parse(localStorage.getItem("cart")) || [];
let currentCat = 'all';

function renderProducts(){
  const list = document.getElementById('productList');
  const term = document.getElementById('searchInput').value.toLowerCase();
  list.innerHTML = '';
  
  const filtered = products.filter(p => {
    return (currentCat === 'all' || p.category === currentCat) && p.name.toLowerCase().includes(term);
  });

  filtered.forEach(p => {
    list.innerHTML += `
      <div class="card">
        <img src="${p.img}" onclick="openDetails(${p.id})">
        <h3>${p.name}</h3>
        <div class="price">${money.format(p.price)}</div>
        <button class="add-btn" onclick="addToCart(${p.id})">Agregar +</button>
      </div>`;
  });
}

function filterCat(cat, btn){
  currentCat = cat;
  document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  renderProducts();
}

function addToCart(id){
  const item = cart.find(i => i.id === id);
  if(item) item.qty++;
  else cart.push({...products.find(p => p.id === id), qty: 1});
  saveCart();
  const t = document.getElementById('toast');
  t.style.display = 'block'; setTimeout(() => t.style.display = 'none', 1500);
}

function removeFromCart(id){
  cart = cart.filter(i => i.id !== id);
  saveCart();
}

function saveCart(){
  localStorage.setItem("cart", JSON.stringify(cart));
  renderCart();
}

function renderCart(){
  const list = document.getElementById('cartList');
  document.getElementById('cartCount').innerText = cart.reduce((acc, i) => acc + i.qty, 0);
  if(cart.length === 0) {
    list.innerHTML = '<p style="color:gray; text-align:center">Carrito vac√≠o</p>';
    document.getElementById('displayTotal').innerText = "$0.00";
    return;
  }
  let subtotal = 0;
  list.innerHTML = cart.map(i => {
    subtotal += i.price * i.qty;
    return `<div style="display:flex; justify-content:space-between; margin-bottom:8px; align-items:center; background:rgba(255,255,255,0.05); padding:8px; border-radius:8px;">
      <span style="font-size:0.9rem;">${i.qty}x ${i.name}</span>
      <div style="display:flex; align-items:center; gap:10px;">
        <span>${money.format(i.price * i.qty)}</span>
        <span onclick="removeFromCart(${i.id})" style="color:#ef4444; cursor:pointer; font-weight:bold;">&times;</span>
      </div>
    </div>`;
  }).join('');
  const envio = parseFloat(document.getElementById('envioSelect').value);
  document.getElementById('displayTotal').innerText = money.format(subtotal + envio);
}

function procesarPedido() {
    if(cart.length === 0) return alert("Agrega productos al carrito primero.");
    const btn = document.getElementById('btnGenerar');
    btn.innerHTML = "‚è≥ Generando Ticket...";
    btn.disabled = true;

    const envioVal = parseFloat(document.getElementById('envioSelect').value);
    const envioTxt = document.getElementById('envioSelect').options[document.getElementById('envioSelect').selectedIndex].text;
    
    document.getElementById('t-fecha').innerText = new Date().toLocaleString();
    let total = 0;
    document.getElementById('t-items').innerHTML = cart.map(i => {
        total += i.price * i.qty;
        return `<div class="t-row"><span>${i.qty} x ${i.name.substring(0,18)}</span><span>${money.format(i.price * i.qty)}</span></div>`;
    }).join('');
    
    document.getElementById('t-envio').innerText = money.format(envioVal);
    document.getElementById('t-total').innerText = money.format(total + envioVal);

    html2canvas(document.getElementById('ticket-container'), { scale: 2 }).then(canvas => {
        const link = document.createElement('a');
        link.download = 'Ticket_SantShop.png';
        link.href = canvas.toDataURL();
        link.click();

        const msg = `*NUEVO PEDIDO SANTSHOP*%0A%0ATotal: ${money.format(total + envioVal)}%0AEntrega: ${envioTxt}%0A%0A_Te env√≠o el comprobante en imagen._`;
        window.open(`https://wa.me/${phone}?text=${msg}`, '_blank');

        cart = []; saveCart();
        btn.innerHTML = "CONFIRMAR Y GENERAR TICKET";
        btn.disabled = false;
    });
}

function openDetails(id){
    const p = products.find(i => i.id === id);
    document.getElementById('modalBody').innerHTML = `
        <img src="${p.img}" style="width:100%; border-radius:10px; margin-bottom:10px;">
        <h2>${p.name}</h2>
        <h3 style="color:var(--blue); margin:10px 0;">${money.format(p.price)}</h3>
        <p>${p.desc}</p>
        <button class="add-btn" style="margin-top:15px;" onclick="addToCart(${p.id}); closeModal()">A√±adir al Carrito</button>
    `;
    document.getElementById('productModal').style.display = 'flex';
}
function closeModal(){ document.getElementById('productModal').style.display = 'none'; }

renderProducts();
renderCart();
</script>
</body>
</html>
