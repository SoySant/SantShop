<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>SantShop | Tech & Accesorios</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="icon" type="https://scontent-qro1-1.xx.fbcdn.net/v/t39.30808-6/611195501_856107633702557_8027363233463585295_n.jpg?_nc_cat=110&_nc_cb=99be929b-ad57045b&ccb=1-7&_nc_sid=127cfc&_nc_eui2=AeEXVK1mCJJiEb1A9IW2jmLs2z27XeT5xZfbPbtd5PnFl9pnhc1X9iqmHlAPkoO_GqESrn1hfmxc3_QfV_UTdLVR&_nc_ohc=ViH4YPbc1nQQ7kNvwFbHI6S&_nc_oc=AdkXQ8cL9OeSEUrvcDIdGp5cOaEXEjHMFlp7_90KMDwo4QNdpJx1ZKfaG1K3Nv_E5rA&_nc_zt=23&_nc_ht=scontent-qro1-1.xx&_nc_gid=KqJIWavD38x7tr9L161Vzg&oh=00_AfowS0XoCJUFGlO9GG_6Pn1g4JH0WbiK7y9r_Z4iekWhqA&oe=6960B2F6">
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <style>
    :root {
      --dark-bg: #020617;
      --card-glass: rgba(15, 23, 42, 0.8);
      --blue: #3b82f6;
      --neon-blue: #00f2ff;
      --neon-purple: #7000ff;
      --text: #f1f5f9;
      --gray: #94a3b8;
    }

    @keyframes reveal { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes neonBorder { 
      0%, 100% { border-color: rgba(0, 242, 255, 0.3); box-shadow: 0 0 5px rgba(0, 242, 255, 0.2); }
      50% { border-color: var(--neon-blue); box-shadow: 0 0 15px rgba(0, 242, 255, 0.5); }
    }

    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
    body { background-color: var(--dark-bg); background-image: radial-gradient(circle at 50% 0%, #1e293b 0%, #020617 70%); background-attachment: fixed; color: var(--text); padding-bottom: 120px; }
    h1, h2, h3, .brand-name { font-family: 'Orbitron', sans-serif; letter-spacing: 1px; }

    header {
      position: sticky; top: 0; z-index: 100;
      background: rgba(2, 6, 23, 0.8); backdrop-filter: blur(15px);
      padding: 12px 20px; display: flex; justify-content: space-between; align-items: center;
      border-bottom: 1px solid rgba(59, 130, 246, 0.2);
    }

    .categories {
      display: flex; gap: 12px; overflow-x: auto; padding: 15px 20px;
      scrollbar-width: none; mask-image: linear-gradient(to right, black 85%, transparent);
    }
    .categories::-webkit-scrollbar { display: none; }

    .cat-btn {
      padding: 10px 22px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);
      background: rgba(30, 41, 59, 0.5); color: var(--gray); cursor: pointer;
      white-space: nowrap; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-size: 0.85rem; font-weight: 600; text-transform: uppercase;
    }
    .cat-btn.active {
      background: rgba(59, 130, 246, 0.15); color: var(--neon-blue);
      border-color: var(--neon-blue); box-shadow: 0 0 15px rgba(0, 242, 255, 0.2);
      transform: translateY(-2px);
    }

    .products { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 15px; padding: 20px; }
    .card {
      background: var(--card-glass); border-radius: 24px; padding: 12px;
      border: 1px solid rgba(255,255,255,0.05); display: flex; flex-direction: column;
      transition: 0.4s; animation: reveal 0.5s ease backwards;
    }
    .card:hover { transform: scale(1.03); animation: neonBorder 1.5s infinite; }
    .card img { width: 100%; height: 160px; object-fit: contain; border-radius: 18px; cursor: pointer; }

    .admin-modal {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.9); z-index: 5000; display: none;
      justify-content: center; align-items: center; backdrop-filter: blur(10px);
    }
    .admin-content {
      background: #0f172a; padding: 30px; border-radius: 25px;
      width: 90%; max-width: 400px; border: 1px solid var(--blue);
    }
    .admin-input {
      width: 100%; padding: 12px; margin: 10px 0; border-radius: 10px;
      background: #1e293b; border: 1px solid #334155; color: white; outline: none;
    }

    .modal {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.95); z-index: 2000; display: none;
      justify-content: center; align-items: center;
    }
    .modal-content {
      background: #020617; width: 100%; height: 100%; position: relative;
      display: flex; flex-direction: column; overflow-y: auto;
    }

    .wa-float {
      position: fixed; bottom: 25px; right: 25px; background: #25D366;
      width: 60px; height: 60px; border-radius: 50%; display: flex;
      align-items: center; justify-content: center; z-index: 1000; box-shadow: 0 10px 25px rgba(0,0,0,0.5);
    }
    
    .price { font-size: 1.3rem; font-weight: bold; color: white; margin: 10px 0; font-family: 'Orbitron'; }
    .add-btn {
      width: 100%; padding: 12px; border-radius: 12px; border: none;
      background: var(--blue); color: white; font-weight: bold; cursor: pointer;
    }

    #ticket-container { position: fixed; left: -9999px; top: 0; width: 350px; background: #fff; color: #000; padding: 20px; font-family: 'Courier New', monospace; }
  </style>
</head>
<body>

<div id="loginModal" class="admin-modal">
  <div class="admin-content">
    <h2 style="margin-bottom:20px; text-align:center; color:var(--blue)">SANT ADMIN</h2>
    <input type="text" id="adminUser" class="admin-input" placeholder="Usuario">
    <input type="password" id="adminPass" class="admin-input" placeholder="ContraseÃ±a">
    <button onclick="checkLogin()" style="width:100%; padding:12px; background:var(--blue); border:none; border-radius:10px; color:white; font-weight:bold; margin-top:10px;">ACCEDER</button>
    <button onclick="closeAdmin()" style="width:100%; background:transparent; color:gray; border:none; margin-top:15px;">Cancelar</button>
  </div>
</div>

<div id="adminDashboard" class="admin-modal">
  <div class="admin-content" style="max-width: 500px;">
    <h2 style="color:var(--neon-blue); margin-bottom:15px;">ðŸ“Š PANEL DE CONTROL</h2>
    <div id="adminStats" style="background:rgba(255,255,255,0.05); padding:20px; border-radius:15px; margin-bottom:20px;"></div>
    <button onclick="clearHistory()" style="width:100%; padding:12px; background:#ef4444; border:none; border-radius:10px; color:white; margin-bottom:10px;">LIMPIAR HISTORIAL</button>
    <button onclick="closeAdmin()" style="width:100%; padding:12px; background:transparent; border:1px solid #334155; border-radius:10px; color:white;">SALIR</button>
  </div>
</div>

<header>
  <strong class="brand-name" style="color:var(--blue)">SANTSHOP</strong>
  <div onclick="document.querySelector('.checkout-panel').scrollIntoView({behavior:'smooth'})" style="background:rgba(59,130,246,0.2); padding:8px 15px; border-radius:20px; border:1px solid var(--blue); cursor:pointer;">
    ðŸ›’ <span id="cartCount">0</span>
  </div>
</header>

<div class="hero" style="text-align:center; padding: 50px 20px;">
  <img src="https://scontent-qro1-1.xx.fbcdn.net/v/t39.30808-6/611195501_856107633702557_8027363233463585295_n.jpg?_nc_cat=110&_nc_cb=99be929b-ad57045b&ccb=1-7&_nc_sid=127cfc&_nc_eui2=AeEXVK1mCJJiEb1A9IW2jmLs2z27XeT5xZfbPbtd5PnFl9pnhc1X9iqmHlAPkoO_GqESrn1hfmxc3_QfV_UTdLVR&_nc_ohc=ViH4YPbc1nQQ7kNvwFbHI6S&_nc_oc=AdkXQ8cL9OeSEUrvcDIdGp5cOaEXEjHMFlp7_90KMDwo4QNdpJx1ZKfaG1K3Nv_E5rA&_nc_zt=23&_nc_ht=scontent-qro1-1.xx&_nc_gid=KqJIWavD38x7tr9L161Vzg&oh=00_AfowS0XoCJUFGlO9GG_6Pn1g4JH0WbiK7y9r_Z4iekWhqA&oe=6960B2F6" id="logoHero" alt="Logo" style="width:120px; height:120px; border-radius:50%; border:3px solid var(--blue); cursor:pointer;" onclick="adminTrigger()" onerror="this.src='https://cdn-icons-png.flaticon.com/512/3081/3081559.png'">
  <h1 style="margin-top:15px; font-size:2.5rem; background: linear-gradient(to bottom, #fff, #64748b); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">SANTSHOP</h1>
  <p style="color:var(--gray)">High-End Technology</p>
</div>

<div class="controls-container">
  <div style="padding:0 20px;">
    <input type="text" id="searchInput" placeholder="ðŸ” Buscar productos..." onkeyup="renderProducts()" 
    style="width:100%; background:#0f172a; border:1px solid #1e293b; padding:15px; border-radius:15px; color:white; outline:none; border-bottom: 2px solid var(--blue);">
  </div>
  
  <div class="categories">
    <button class="cat-btn active" onclick="filterCat('all', this)">Todo</button>
    <button class="cat-btn" onclick="filterCat('audio', this)">Audio</button>
    <button class="cat-btn" onclick="filterCat('carga', this)">Carga</button>
    <button class="cat-btn" onclick="filterCat('relojes', this)">Relojes</button>
    <button class="cat-btn" onclick="filterCat('accesorios', this)">Accesorios</button>
  </div>
</div>

<div class="products" id="productList"></div>

<div class="checkout-panel" style="margin:20px; background:rgba(30,41,59,0.3); padding:25px; border-radius:30px; border:1px solid rgba(255,255,255,0.05);">
  <h3 style="margin-bottom:20px;">ðŸ§¾ RESUMEN DE COMPRA</h3>
  <div id="cartList"></div>
  
  <select id="envioSelect" onchange="renderCart()" style="width:100%; padding:15px; margin-top:15px; background:#0f172a; color:white; border:1px solid #334155; border-radius:12px;">
    <option value="0">--- SelecciÃ³n de Entrega ---</option>
    <option value="0">Parque HuehuetÃ¡n (Gratis)</option>
    <option value="15">A Domicilio (Cercano) +$15</option>
    <option value="0">HuehuetÃ¡n Pueblo (Gratis)</option>
    <option value="0">Abarrote Kristal (Gratis)</option>
    <option value="0">Abarrote La Central (Gratis)</option>
  </select>

  <div style="display:flex; justify-content:space-between; margin-top:25px; align-items:center;">
    <span style="color:var(--gray)">TOTAL:</span>
    <span id="displayTotal" style="color:var(--neon-blue); font-size:2rem; font-weight:bold; font-family:'Orbitron';">$0.00</span>
  </div>

  <button onclick="procesarPedido()" style="width:100%; padding:20px; background:var(--blue); color:white; border:none; border-radius:15px; margin-top:20px; font-weight:bold; text-transform:uppercase; letter-spacing:2px; box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4);">
    Generar Ticket âš¡
  </button>
</div>

<div id="productModal" class="modal">
  <div class="modal-content">
    <div onclick="closeModal()" style="position:absolute; top:20px; right:20px; font-size:30px; color:white; z-index:10; cursor:pointer;">âœ•</div>
    <div id="modalBody" style="padding:30px; display:flex; flex-direction:column; align-items:center;"></div>
  </div>
</div>

<a href="https://wa.me/529641034714" class="wa-float" target="_blank">
  <svg width="35" height="35" fill="white" viewBox="0 0 16 16"><path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z"/></svg>
</a>

<div id="ticket-container">
  <div style="text-align:center; border-bottom:2px dashed #000; padding-bottom:10px;">
    <h1>SANTSHOP</h1>
    <p id="t-fecha"></p>
  </div>
  <div id="t-items" style="padding:10px 0;"></div>
  <div style="border-top:2px dashed #000; padding-top:10px; font-weight:bold; font-size:20px;">
    TOTAL: <span id="t-total"></span>
  </div>
</div>

<script>
const products = [
  { id: 1, name: 'AudÃ­fonos TWS Pro 2', category: 'audio', price: 299, img: 'https://http2.mlstatic.com/D_NQ_NP_2X_697864-MLA100038119191_122025-F.webp', desc: 'Sonido Hi-Fi premium con cancelaciÃ³n de ruido activa.' },
  { id: 2, name: 'PowerBank 10k mAh', category: 'carga', price: 599, img: 'https://http2.mlstatic.com/D_NQ_NP_2X_995948-MLA99547949208_122025-F.webp', desc: 'Carga sÃºper rÃ¡pida de 22.5W. DiseÃ±o ultra compacto.' },
  { id: 3, name: 'Anillo Titanio Black', category: 'accesorios', price: 40, img: 'https://http2.mlstatic.com/D_NQ_NP_2X_778377-MLA98079491084_112025-F.webp', desc: 'Acero de titanio color negro mate. Resistente al agua.' },
  { id: 4, name: 'Cargador 45W Turbo', category: 'carga', price: 280, img: 'https://http2.mlstatic.com/D_NQ_NP_2X_616746-MLA100083526249_122025-F.webp', desc: 'Alta potencia. Incluye cable tipo C reforzado.' },
  { id: 5, name: 'Smartwatch Ultra', category: 'relojes', price: 450, img: 'https://http2.mlstatic.com/D_NQ_NP_2X_942600-MLA99945379683_112025-F.webp', desc: 'Pantalla AMOLED y recepciÃ³n de llamadas.' },
  { id: 6, name: 'Sport Hooks IPX7', category: 'audio', price: 450, img: 'https://http2.mlstatic.com/D_NQ_NP_2X_681843-MLA99455767776_112025-F.webp', desc: 'ProtecciÃ³n contra sudor y sujeciÃ³n mÃ¡xima.' },
  { id: 7, name: 'Figura Jujutsu Kaisen', category: 'accesorios', price: 500, img: 'https://http2.mlstatic.com/D_NQ_NP_2X_630678-MLA100664763410_122025-F.webp', desc: 'Figura coleccionable detallada de 18cm.' }
];

const money = new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' });
let cart = JSON.parse(localStorage.getItem("cart")) || [];
let currentCat = 'all';
let clicks = 0;

function renderProducts(){
  const list = document.getElementById('productList');
  const term = document.getElementById('searchInput').value.toLowerCase();
  list.innerHTML = '';
  products.filter(p => (currentCat === 'all' || p.category === currentCat) && p.name.toLowerCase().includes(term))
  .forEach((p, i) => {
    list.innerHTML += `
      <div class="card" style="animation-delay:${i*0.05}s">
        <img src="${p.img}" onclick="openDetails(${p.id})">
        <h3 style="font-size:0.9rem; margin-top:10px; color:#94a3b8;">${p.name}</h3>
        <div class="price">${money.format(p.price)}</div>
        <button class="add-btn" onclick="addToCart(${p.id})">Agregar +</button>
      </div>`;
  });
}

function filterCat(cat, btn){
  currentCat = cat;
  document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  renderProducts();
}

function adminTrigger() {
    clicks++;
    if(clicks === 5) {
        document.getElementById('loginModal').style.display = 'flex';
        clicks = 0;
    }
    setTimeout(() => clicks = 0, 2000);
}

function checkLogin() {
    const u = document.getElementById('adminUser').value;
    const p = document.getElementById('adminPass').value;
    if(u === "SoySant" && p === "0923josue") {
        document.getElementById('loginModal').style.display = 'none';
        document.getElementById('adminDashboard').style.display = 'flex';
        showAdminStats();
    } else {
        alert("Credenciales incorrectas");
    }
}

function closeAdmin() {
    document.getElementById('loginModal').style.display = 'none';
    document.getElementById('adminDashboard').style.display = 'none';
}

function showAdminStats() {
    const history = JSON.parse(localStorage.getItem("orderHistory")) || [];
    const total = history.reduce((acc, o) => acc + o.total, 0);
    document.getElementById('adminStats').innerHTML = `
        <p>ðŸ“¦ Pedidos: <strong>${history.length}</strong></p>
        <p>ðŸ’° Total: <strong>${money.format(total)}</strong></p>
    `;
}

function clearHistory() {
    if(confirm("Â¿Borrar todo?")) { localStorage.removeItem("orderHistory"); showAdminStats(); }
}

function addToCart(id){
  const item = cart.find(i => i.id === id);
  if(item) item.qty++; else cart.push({...products.find(p => p.id === id), qty: 1});
  saveCart();
}

function saveCart(){ localStorage.setItem("cart", JSON.stringify(cart)); renderCart(); }

function renderCart(){
  const list = document.getElementById('cartList');
  document.getElementById('cartCount').innerText = cart.reduce((acc, i) => acc + i.qty, 0);
  let subtotal = 0;
  list.innerHTML = cart.map(i => {
    subtotal += i.price * i.qty;
    return `<div style="display:flex; justify-content:space-between; margin-bottom:10px; background:rgba(255,255,255,0.03); padding:10px; border-radius:10px;">
      <span>${i.qty}x ${i.name}</span>
      <span onclick="removeFromCart(${i.id})" style="color:#ef4444; cursor:pointer;">âœ•</span>
    </div>`;
  }).join('');
  const envio = parseFloat(document.getElementById('envioSelect').value);
  document.getElementById('displayTotal').innerText = money.format(subtotal + envio);
}

function removeFromCart(id){ cart = cart.filter(i => i.id !== id); saveCart(); }

function openDetails(id){
    const p = products.find(i => i.id === id);
    document.getElementById('modalBody').innerHTML = `
        <img src="${p.img}" style="width:100%; max-height:300px; object-fit:contain; filter:drop-shadow(0 10px 20px #000);">
        <h2 style="margin-top:25px; color:white;">${p.name}</h2>
        <div class="price" style="font-size:2rem; color:var(--blue);">${money.format(p.price)}</div>
        <p style="color:var(--gray); text-align:center; line-height:1.6; margin-bottom:25px;">${p.desc}</p>
        <button class="add-btn" onclick="addToCart(${p.id}); closeModal()">AÃ‘ADIR AL CARRITO</button>
    `;
    document.getElementById('productModal').style.display = 'flex';
}
function closeModal(){ document.getElementById('productModal').style.display = 'none'; }

function procesarPedido() {
    if(cart.length === 0) return alert("El carrito estÃ¡ vacÃ­o");
    const envioVal = parseFloat(document.getElementById('envioSelect').value);
    const now = new Date();
    document.getElementById('t-fecha').innerText = now.toLocaleString();
    let subtotal = 0;
    document.getElementById('t-items').innerHTML = cart.map(i => {
        subtotal += i.price * i.qty;
        return `<p>${i.qty} x ${i.name} = ${money.format(i.price*i.qty)}</p>`;
    }).join('');
    const finalTotal = subtotal + envioVal;
    document.getElementById('t-total').innerText = money.format(finalTotal);

    const history = JSON.parse(localStorage.getItem("orderHistory")) || [];
    history.push({ fecha: now.toISOString(), total: finalTotal });
    localStorage.setItem("orderHistory", JSON.stringify(history));

    html2canvas(document.getElementById('ticket-container')).then(canvas => {
        const link = document.createElement('a');
        link.download = 'Ticket_SantShop.png';
        link.href = canvas.toDataURL();
        link.click();
        window.open(`https://wa.me/529641034714?text=Nuevo Pedido SantShop: ${money.format(finalTotal)}`, '_blank');
        cart = []; saveCart();
    });
}

// Carga inicial
renderProducts();
renderCart();
</script>
</body>
</html>

